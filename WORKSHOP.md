# Уъркшоп към семинара "Програмиране с Go"

Този документ съдържа инструкциите за уъркшопа и вашето участие в него.

# Камък-ножица-хартия

Проектът, с който ще си играем в уъркшопа е имплементация на добре познатата на всички игра
"Камък-ножица-хартия" като мрежова игра.

Играта има 2 основни компонента:

- Сървър, който управлява играта и ние сме написали.
- Клиент, който ще трябва да напишете вие и да играете помежду си, като се свържете към сървъра!

# Инструкции

Тук ще опишем всички необходими стъпки, за да напишете първия си Go код. Не се колебайте да
задавате въпроси или да посочвате неточности.

## Инсталиране на Go

За първоначланата Go следвайте инструкциите на официалния сайт на Go.

- За Windows Пробвайте MSI инсталатора: https://golang.org/doc/install#windows
- За UNIX-базирана ОС, използвайте пакетния си мениджър или метода описан тук: https://golang.org/doc/install#tarball

За да проверите инсталацията си, следвайте инструкциите тук:
https://golang.org/doc/install#testing

## Задача: клиент за играта

Вашата задача ще е да напишете клиент за сървъра, написан на Golang.
Всъщност ще напишем версия на `nc` UNIX инструмента, който чете от стандартния вход
(терминала) и пише в мрежови TCP сокет.


### main.go

Нека създадем директория `gorpsclient` с един файл `main.go`, където ще напишем кода на клиента.

```
$ mkdir $GOPATH/src/gorpsclient/
$ cd $GOPATH/src/gorpsclient/
$ touch main.go
```

Да добавим първоначалния код за клиента. Използваме пакета от стандартната библиотека
[net](https://golang.org/pkg/net/), за да се свържем към сървъра, който сме деплойнали на сървър с
адрес 35.156.83.78:8080.

```
package main

import (
	"fmt"
	"net"
)

func clientloop(conn net.Conn) {
}

func main() {
	serverAddr := "35.156.83.78:8080"
	conn, err := net.Dial("tcp", serverAddr)
	if err != nil {
		panic(fmt.Sprintf("Error connectinng to %s: %s", serverAddr, err))
	}
	defer conn.Close()

	fmt.Printf("Connected to %s", serverAddr)
	clientloop(conn)
}
```

Да проверим, че се билдва и работи:
```
$ go run main.go
Connected to 35.156.83.78:8080
```

Оттук нататък задачата ви е в `clientloop` да имплементирате версия на `netcat`
инструмента, тоест:

- Пуснете горутина, която да чете от `conn` и да копира в `os.Stdout`, използвайки `io.Copy`.
- В главната горутина четете от терминала (`os.Stdin`) и записвайте в `conn`, отново използвайки `io.Copy`.

Линкове към документация на пкетите:
- https://golang.org/pkg/io/
- https://golang.org/pkg/net/
